{
    "summary": "Create __VAR:entity_singular__",
    "description": "Create a new __VAR:entity_singular__ record with validation and data persistence.\n\n\n__VAR:table_description__\n\nThis endpoint creates a new __VAR:entity_singular__ resource in the database after validating\nthe input data against defined validation rules. Upon successful creation, it returns\nthe complete resource data including any auto-generated fields (ID, timestamps, etc.).\n\n\n**Use this endpoint to:**\n- Add new __VAR:entity_singular__ records to the system\n- Validate data before persistence\n- Generate auto-increment IDs and timestamps\n- Trigger related business logic (events, notifications)\n- Establish relationships with other entities\n\n\n\nThe following validation rules apply to this endpoint:\n\n__VAR:validation_description__\n\n**Required Fields:**\n\nThe following fields are mandatory: __VAR:required_fields__\n\n\n\n**Note:** No specific validation rules are defined for this endpoint.\nAll fields are optional unless marked as required in the schema.\n\n\n\n**Method:** POST\n\n**Content-Type:** application/json\n\n**Required Headers:**\n- `Authorization: Bearer {token}` - Valid authentication token (if protected)\n- `Content-Type: application/json` - JSON request body\n- `Accept: application/json` - Expected response format\n\n**Request Body:**\nSubmit a JSON object containing the __VAR:entity_singular__ data according to the schema below.\n\n\nReturns the newly created __VAR:entity_singular__ with all fields including auto-generated ones.\n\n**Response Structure:**\n```json\n{\n  \"data\": {\n    // Complete __VAR:entity_singular__ object with all fields\n    \"id\": integer,\n    // ... other fields ...\n    \"created_at\": timestamp,\n    \"updated_at\": timestamp\n  },\n  \"message\": \"__VAR:entity_singular__ created successfully\"\n}\n```\n\n**Key Points:**\n- Response wrapped in `data` key\n- Includes auto-generated `id` field\n- Includes timestamps (`created_at`, `updated_at`)\n- Optional success message\n- HTTP status code: **201 Created**\n\n\n\nReturned when input data fails validation rules.\n\n**Common Causes:**\n- Missing required fields\n- Invalid field formats (email, URL, date)\n- Values outside allowed ranges\n- Unique constraint violations (duplicate entries)\n- Invalid enum values\n- Failed custom validation rules\n\n**Response Structure:**\n```json\n{\n  \"message\": \"The given data was invalid.\",\n  \"errors\": {\n    \"field_name\": [\n      \"Error message 1\",\n      \"Error message 2\"\n    ]\n  }\n}\n```\n\n**How to Handle:**\n- Parse the `errors` object to display field-specific messages\n- Show inline validation errors next to form fields\n- Highlight invalid fields in red\n- Focus first invalid field\n- Don't retry without fixing validation errors\n\n\nReturned when endpoint requires authentication but token is missing or invalid.\n\n**Action Required:**\n- Redirect user to login page\n- Clear stored tokens\n- Request fresh authentication\n\n\nReturned when authenticated user lacks permission to create __VAR:entity_plural__.\n\n**Common Causes:**\n- User role doesn't have create permission\n- Account suspended or restricted\n- Organization-level access denied\n\n**Action Required:**\n- Display permission denied message\n- Hide create button for users without permission\n- Contact administrator for access\n\n\nUnexpected server error during creation.\n\n**Common Causes:**\n- Database connection failure\n- Foreign key constraint violation\n- Disk space full\n- Application error\n\n**Action Required:**\n- Retry once after short delay\n- Show generic error message to user\n- Log error details for debugging\n- Contact support if persists\n\n\n\n```javascript\nasync function create__VAR:entity_singular__(data) {\n  try {\n    const response = await fetch('/api/__VAR:entity_url__', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem('auth_token')}`,\n        'Accept': 'application/json'\n      },\n      body: JSON.stringify(data)\n    });\n    \n    if (response.ok) {\n      const result = await response.json();\n      console.log('✅ Created:', result.data);\n      return result.data;\n    }\n    \n    if (response.status === 422) {\n      const errors = await response.json();\n      console.error('❌ Validation failed:', errors.errors);\n      displayValidationErrors(errors.errors);\n      return null;\n    }\n    \n    throw new Error(`HTTP ${response.status}`);\n    \n  } catch (error) {\n    console.error('Error creating __VAR:entity_singular__:', error);\n    alert('Failed to create __VAR:entity_singular__. Please try again.');\n    return null;\n  }\n}\n\n// Usage\nconst new__VAR:entity_singular__ = await create__VAR:entity_singular__({\n  // Your data here based on schema\n});\n```\n\n\n```javascript\nimport { useState } from 'react';\n\nfunction Create__VAR:entity_singular__Form() {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setErrors({});\n    \n    try {\n      const response = await fetch('/api/__VAR:entity_url__', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer __JSON:token__`\n        },\n        body: JSON.stringify(formData)\n      });\n      \n      if (response.ok) {\n        const result = await response.json();\n        alert('__VAR:entity_singular__ created successfully!');\n        // Redirect or clear form\n        navigate('/__VAR:entity_plural__');\n      } else if (response.status === 422) {\n        const data = await response.json();\n        setErrors(data.errors);\n      } else {\n        throw new Error('Failed to create');\n      }\n    } catch (error) {\n      alert('Error: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return (\n    <form onSubmit={handleSubmit}>\n      {/* Form fields here */}\n      \n      {/* Show validation errors */}\n      {Object.keys(errors).map(field => (\n        <div key={field} className=\"error\">\n          {errors[field].join(', ')}\n        </div>\n      ))}\n      \n      <button type=\"submit\" disabled={loading}>\n        {loading ? 'Creating...' : 'Create __VAR:entity_singular__'}\n      </button>\n    </form>\n  );\n}\n```\n\n\n```javascript\nimport { ref } from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport function useCreate__VAR:entity_singular__() {\n  const router = useRouter();\n  const loading = ref(false);\n  const errors = ref({});\n  \n  const create = async (data) => {\n    loading.value = true;\n    errors.value = {};\n    \n    try {\n      const response = await fetch('/api/__VAR:entity_url__', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify(data)\n      });\n      \n      if (response.ok) {\n        const result = await response.json();\n        return result.data;\n      }\n      \n      if (response.status === 422) {\n        const data = await response.json();\n        errors.value = data.errors;\n        return null;\n      }\n      \n      throw new Error('Failed to create');\n      \n    } catch (error) {\n      console.error(error);\n      return null;\n    } finally {\n      loading.value = false;\n    }\n  };\n  \n  return {\n    create,\n    loading,\n    errors\n  };\n}\n\n// In component\n<script setup>\nconst { create, loading, errors } = useCreate__VAR:entity_singular__();\n\nconst handleSubmit = async () => {\n  const result = await create(formData.value);\n  if (result) {\n    router.push('/__VAR:entity_plural__');\n  }\n};\n</script>\n```\n\n\n```bash\ncurl -X POST https://api.example.com/api/__VAR:entity_url__ \\\n  -H \"Authorization: Bearer YOUR_TOKEN_HERE\" \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Accept: application/json\" \\\n  -d '{\n    \"field1\": \"value1\",\n    \"field2\": \"value2\"\n  }'\n\n{\n  \"data\": {\n    \"id\": 123,\n    \"field1\": \"value1\",\n    \"field2\": \"value2\",\n    \"created_at\": \"2024-12-29T10:00:00Z\",\n    \"updated_at\": \"2024-12-29T10:00:00Z\"\n  },\n  \"message\": \"__VAR:entity_singular__ created successfully\"\n}\n\n{\n  \"message\": \"The given data was invalid.\",\n  \"errors\": {\n    \"field1\": [\"The field1 field is required.\"],\n    \"field2\": [\"The field2 must be at least 3 characters.\"]\n  }\n}\n```\n\n\n```php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Requests\\Create__VAR:entity_singular__Request;\nuse App\\Models\\__VAR:entity_singular__;\nuse Illuminate\\Http\\JsonResponse;\n\nclass __VAR:entity_singular__Controller extends Controller\n{\n    /**\n     * Create new __VAR:entity_singular__\n     */\n    public function store(Create__VAR:entity_singular__Request $request): JsonResponse\n    {\n        // Validation automatically handled by FormRequest\n        $validated = $request->validated();\n        \n        // Create resource\n        $__VAR:entity_singular__ = __VAR:entity_singular__::create($validated);\n        \n        // Load relationships if needed\n        $__VAR:entity_singular__->load(['relation1', 'relation2']);\n        \n        // Return response\n        return response()->json([\n            'data' => $__VAR:entity_singular__,\n            'message' => '__VAR:entity_singular__ created successfully'\n        ], 201);\n    }\n}\n```\n\n\n```python\nimport requests\n\ndef create___VAR:entity_singular__(data, token):\n    \"\"\"Create new __VAR:entity_singular__\"\"\"\n    url = 'https://api.example.com/api/__VAR:entity_url__'\n    headers = {\n        'Authorization': f'Bearer {token}',\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n    }\n    \n    try:\n        response = requests.post(url, json=data, headers=headers)\n        \n        if response.status_code == 201:\n            result = response.json()\n            print(f\"✅ Created: {result['data']['id']}\")\n            return result['data']\n        \n        elif response.status_code == 422:\n            errors = response.json()['errors']\n            print(f\"❌ Validation errors: {errors}\")\n            return None\n        \n        else:\n            print(f\"❌ Error: {response.status_code}\")\n            return None\n            \n    except Exception as e:\n        print(f\"Exception: {e}\")\n        return None\n\nnew_item = create___VAR:entity_singular__({\n    'field1': 'value1',\n    'field2': 'value2'\n}, 'your-token-here')\n```\n\n\n\n**Server-Side Validation Required:**\n- ALWAYS validate on server (never trust client)\n- Use Laravel FormRequest for validation\n- Sanitize input to prevent XSS\n- Validate file uploads (type, size)\n\n```php\n// ✅ GOOD: Server validates\nclass Create__VAR:entity_singular__Request extends FormRequest\n{\n    public function rules()\n    {\n        return [\n            'email' => 'required|email|unique:users',\n            'name' => 'required|string|max:255',\n            'age' => 'required|integer|min:18'\n        ];\n    }\n}\n\n// ❌ BAD: Only client validation\n// Client validation is for UX, not security\n```\n\n\n**Permission Check:**\n- Verify user has create permission\n- Check organization/tenant access\n- Validate ownership for nested resources\n\n```php\n// Check permission before creating\n$this->authorize('create', __VAR:entity_singular__::class);\n```\n\n\n**Database Constraints:**\n- Use database constraints (unique, foreign keys)\n- Validate related entities exist\n- Handle race conditions (unique violations)\n\n```php\ntry {\n    $__VAR:entity_singular__ = __VAR:entity_singular__::create($data);\n} catch (\\Illuminate\\Database\\QueryException $e) {\n    if ($e->errorInfo[1] == 1062) {\n        // Duplicate entry\n        return response()->json([\n            'message' => 'A __VAR:entity_singular__ with this identifier already exists.'\n        ], 422);\n    }\n    throw $e;\n}\n```\n\n\n**Prevent Abuse:**\n- Limit creation rate (e.g., 10 per minute)\n- Use Laravel throttle middleware\n- Track by IP and/or user ID\n\n```php\nRoute::middleware(['throttle:10,1'])->group(function () {\n    Route::post('/__VAR:entity_plural__', [Controller::class, 'store']);\n});\n```\n\n\n\n**Symptom:**\n```json\n{\n  \"errors\": {\n    \"name\": [\"The name field is required.\"]\n  }\n}\n```\n\n**Solutions:**\n1. Check field is included in request body\n2. Verify field name matches exactly (case-sensitive)\n3. Ensure value is not empty string\n4. Check request Content-Type is application/json\n\n**Debug:**\n```javascript\nconsole.log('Request body:', JSON.stringify(data, null, 2));\nconsole.log('Field exists:', 'name' in data);\nconsole.log('Field value:', data.name);\n```\n\n\n**Symptom:**\n```json\n{\n  \"errors\": {\n    \"email\": [\"The email has already been taken.\"]\n  }\n}\n```\n\n**Solutions:**\n1. Check if resource already exists\n2. Use different value for unique field\n3. Consider updating existing resource instead\n\n\n**Cause:** User lacks create permission\n\n**Solutions:**\n1. Verify user has correct role assigned\n2. Check role has create permission for this resource\n3. Contact administrator to grant permission\n\n**Debug:**\n```javascript\n// Check permissions before showing create button\nif (permissions.has('__VAR:module__.__VAR:entity_plural__.store')) {\n  showCreateButton();\n}\n```\n\n\n**Symptom:** Server error when creating with related entity ID\n\n**Cause:** Referenced entity doesn't exist\n\n**Solutions:**\n1. Verify related entity exists first\n2. Use valid ID from existing resource\n3. Handle cascade deletes properly\n\n**Example:**\n```javascript\n// Verify category exists before creating product\nconst category = await fetchCategory(categoryId);\nif (!category) {\n  alert('Selected category does not exist');\n  return;\n}\n\n// Now safe to create product\nawait createProduct({ category_id: categoryId, ... });\n```\n\n\n**Cause:** Resource created but response incomplete\n\n**Solutions:**\n1. Check backend loads relationships\n2. Verify all fields in response transformer\n3. Ensure timestamps are included\n\n**Backend Fix:**\n```php\n$__VAR:entity_singular__->load(['relation1', 'relation2']);\nreturn response()->json(['data' => $__VAR:entity_singular__], 201);\n```\n\n\n\n1. **Show Loading State**\n```javascript\n<button disabled={loading}>\n  {loading ? 'Creating...' : 'Create __VAR:entity_singular__'}\n</button>\n```\n\n2. **Display Validation Errors Inline**\n```javascript\n{errors.email && (\n  <span className=\"error\">{errors.email[0]}</span>\n)}\n```\n\n3. **Redirect After Success**\n```javascript\nif (result) {\n  navigate(`/__VAR:entity_plural__/${result.id}`);\n}\n```\n\n4. **Optimistic UI Updates**\n```javascript\n// Add to list immediately (optimistic)\nsetItems([...items, tempItem]);\n\n// Create on server\nconst created = await createItem(data);\n\n// Replace temp with real\nsetItems(items.map(i => i.id === tempItem.id ? created : i));\n```\n\n5. **Prevent Double Submit**\n```javascript\nconst [submitting, setSubmitting] = useState(false);\n\nconst handleSubmit = async () => {\n  if (submitting) return; // Prevent double click\n  setSubmitting(true);\n  try {\n    await create(data);\n  } finally {\n    setSubmitting(false);\n  }\n};\n```\n\n\n1. **Use FormRequest for Validation**\n```php\npublic function store(Create__VAR:entity_singular__Request $request)\n{\n    // Validation automatic\n}\n```\n\n2. **Use Database Transactions**\n```php\nDB::transaction(function () use ($data) {\n    $__VAR:entity_singular__ = __VAR:entity_singular__::create($data);\n    $__VAR:entity_singular__->relations()->attach($relatedIds);\n});\n```\n\n3. **Fire Events for Side Effects**\n```php\nevent(new __VAR:entity_singular__Created($__VAR:entity_singular__));\n```\n\n4. **Return 201 with Location Header**\n```php\nreturn response()\n    ->json(['data' => $__VAR:entity_singular__], 201)\n    ->header('Location', route('__VAR:entity_plural__.show', $__VAR:entity_singular__));\n```\n\n5. **Log Important Creations**\n```php\nLog::info('__VAR:entity_singular__ created', [\n    'id' => $__VAR:entity_singular__->id,\n    'user_id' => auth()->id()\n]);\n```\n",
    "tags": [
        "__VAR:module__"
    ],
    "requestBody": {
        "required": true,
        "description": "JSON object containing __VAR:entity_singular__ data.\nAll required fields must be provided.\nOptional fields can be omitted.\n",
        "content": {
            "application/json": {
                "schema": "__JSON:request_schema__",
                "example": "__JSON:request_example__"
            }
        }
    },
    "responses": {
        "201": {
            "description": "__JSON:entity_singular__ created successfully.\n\nReturns the complete resource including:\n- Auto-generated ID\n- All submitted fields\n- Timestamps (created_at, updated_at)\n- Default values for optional fields\n- Success message\n",
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "properties": {
                            "data": "__JSON:model_schema__",
                            "message": {
                                "type": "string",
                                "example": "__VAR:entity_singular__ created successfully"
                            }
                        }
                    },
                    "example": {
                        "data": "__JSON:response_example__",
                        "message": "__VAR:entity_singular__ created successfully"
                    }
                }
            }
        },
        "422": {
            "description": "Validation failed - Invalid input data.\n\nReturns detailed validation errors for each invalid field.\nUse these to display inline error messages in your form.\n",
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "properties": {
                            "message": {
                                "type": "string",
                                "example": "The given data was invalid."
                            },
                            "errors": {
                                "type": "object",
                                "description": "Object with field names as keys and error arrays as values",
                                "additionalProperties": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "example": {
                        "message": "The given data was invalid.",
                        "errors": "__JSON:validation_errors_example__"
                    }
                }
            }
        },
        "401": {
            "description": "Unauthorized - Authentication required.\n\nReturned when:\n- Authorization header missing\n- Token invalid or expired\n- Token format incorrect\n",
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "properties": {
                            "message": {
                                "type": "string",
                                "example": "Unauthenticated."
                            }
                        }
                    }
                }
            }
        },
        "403": {
            "description": "Forbidden - Permission denied.\n\nReturned when:\n- User lacks create permission\n- Account suspended\n- Organization access denied\n",
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "properties": {
                            "message": {
                                "type": "string",
                                "example": "This action is unauthorized."
                            }
                        }
                    }
                }
            }
        },
        "500": {
            "description": "Internal Server Error - Unexpected error.\n\nCommon causes:\n- Database connection failed\n- Foreign key constraint violation\n- Disk space full\n\nAction: Retry once, then contact support.\n",
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "properties": {
                            "message": {
                                "type": "string",
                                "example": "Server error occurred while creating __VAR:entity_singular__."
                            }
                        }
                    }
                }
            }
        }
    }
}